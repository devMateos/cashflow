import{_ as b,o as _,c as g,a as e,b as U,p as L,d as k,e as G,r as h,f as I,i as X,u as x,w,v as V,F as A,g as f,t as D,n as z,h as J,j as B,k as M,l as S,m as O,q as N,s as T,T as P,x as j,y as q}from"./index-6kO479iq.js";const R=t=>(L("data-v-9a1276e5"),t=t(),k(),t),W=R(()=>e("h1",null,[e("span",null,"Cash"),G("Flow")],-1)),Z=R(()=>e("span",null,null,-1)),K={__name:"Header",setup(t){function o(){location.reload()}return(s,i)=>(_(),g("header",null,[e("img",{onClick:o,src:U,alt:"Logo"}),W,Z]))}},Q=b(K,[["__scopeId","data-v-9a1276e5"]]),Y=t=>(L("data-v-792e792c"),t=t(),k(),t),ee={class:"header"},te={class:"resume"},oe={class:"movements"},se=Y(()=>e("div",{class:"grip"},null,-1)),ne=[se],ae={class:"body"},le={__name:"Layout",setup(t){let o=h(!1);return(s,i)=>(_(),g(A,null,[e("div",ee,[I(s.$slots,"header",{},void 0,!0)]),e("div",te,[I(s.$slots,"resume",{},void 0,!0)]),e("div",oe,[e("div",{class:"head",onClick:i[0]||(i[0]=u=>X(o)?o.value=!x(o):o=!x(o))},ne),w(e("div",ae,[I(s.$slots,"movements",{},void 0,!0)],512),[[V,x(o)]])])],64))}},ie=b(le,[["__scopeId","data-v-792e792c"]]),ue={class:"graphic"},ce={class:"action"},re={__name:"Index",props:{label:{type:String},totalAmount:{type:Number},amount:{type:Number,default:null},date:{type:String}},setup(t){const o=t,s=f(()=>o.label!==null?o.label:o.date),i=f(()=>o.amount!==null?o.amount:o.totalAmount),u=new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}),d=f(()=>u.format(i.value));return(n,v)=>(_(),g("main",null,[e("p",null,D(s.value),1),e("h1",null,D(d.value),1),e("div",ue,[I(n.$slots,"graphic",{},void 0,!0)]),e("div",ce,[I(n.$slots,"action",{},void 0,!0)])]))}},de=b(re,[["__scopeId","data-v-c976e177"]]),me="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M4.5%207.37193L5.625%2022.5H18.375L19.5%207.37193M4.5%207.37193H3L4.125%203.48113H6.75M4.5%207.37193H19.5M19.5%207.37193H21L20.25%203.48113H17.25M17.25%203.48113H12.375H6.75M17.25%203.48113L15.75%201.5H8.25L6.75%203.48113M9%2010.217V19.3302M15%2019.3302V10.217M12%2019.3302V10.217'%20stroke='%230689B0'%20stroke-width='2'%20/%3e%3c/svg%3e",ve={class:"movement"},_e={class:"content"},pe={class:"action"},he={__name:"Movement",props:{id:{type:Number},title:{type:String},description:{type:String},amount:{type:Number}},emits:["remove"],setup(t,{emit:o}){const s=new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}),i=t,u=f(()=>s.format(i.amount)),d=f(()=>i.amount<0),n=o,v=()=>{n("remove",i.id)};return(y,$)=>(_(),g("div",ve,[e("div",_e,[e("h4",null,D(t.title),1),e("p",null,D(t.description),1)]),e("div",pe,[e("img",{src:me,alt:"borrar",onClick:v}),e("p",{class:z({red:d.value,green:!d.value})},D(u.value),3)])]))}},ge=b(he,[["__scopeId","data-v-cc33a40f"]]),fe=t=>(L("data-v-d9127b7b"),t=t(),k(),t),ye={class:"movements"},$e=fe(()=>e("h2",{class:"title"},"Historial",-1)),we={class:"content"},be={__name:"Index",props:{movements:{type:Array,default:()=>[]}},emits:["remove"],setup(t,{emit:o}){const s=o,i=u=>{s("remove",u)};return(u,d)=>(_(),g("div",ye,[$e,e("div",we,[(_(!0),g(A,null,J(t.movements,({id:n,title:v,description:y,amount:$})=>(_(),B(ge,{key:n,id:n,title:v,description:y,amount:$,onRemove:i},null,8,["id","title","description","amount"]))),128))])]))}},xe=b(be,[["__scopeId","data-v-d9127b7b"]]),Me="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M2.12132%200L0%202.12132L9.54595%2011.6673L0%2021.2132L2.12132%2023.3345L11.6673%2013.7886L21.2132%2023.3345L23.3345%2021.2132L13.7886%2011.6673L23.3345%202.12133L21.2132%208.22544e-06L11.6673%209.54595L2.12132%200Z'%20fill='%230689B0'%20/%3e%3c/svg%3e",Se=t=>(L("data-v-5a53f576"),t=t(),k(),t),Ie={class:"modal"},Le=Se(()=>e("p",null,"Nuevo movimiento",-1)),ke={class:"body"},Ce={__name:"Modal",emits:["close"],setup(t,{emit:o}){const s=o,i=()=>s("close");return(u,d)=>(_(),g("div",Ie,[e("div",{class:"head"},[Le,e("img",{onClick:i,src:Me,alt:"cerrar"})]),e("div",ke,[I(u.$slots,"default",{},void 0,!0)])]))}},De=b(Ce,[["__scopeId","data-v-5a53f576"]]),C=t=>(L("data-v-a6916438"),t=t(),k(),t),He={class:"field"},Ne=C(()=>e("label",null,"Título",-1)),Ve={class:"field"},Ae=C(()=>e("label",null,"Cantidad",-1)),Be={class:"field"},Te=C(()=>e("label",null,"Description",-1)),Re={class:"field"},Fe={class:"radio-label"},Ee=C(()=>e("span",null,"Ingreso",-1)),Ue={class:"radio-label"},Ge=C(()=>e("span",null,"Gasto",-1)),Xe=C(()=>e("div",null,[e("button",null,"Agregar movimiento")],-1)),ze={__name:"Action",emits:["create"],setup(t,{emit:o}){const s=h(!1),i=h(""),u=h(0),d=h(""),n=h("Ingreso"),v=o,y=()=>{s.value=!s.value,v("create",{title:i.value,description:d.value,amount:n.value==="Ingreso"?u.value:-u.value,time:new Date,id:new Date}),i.value="",d.value="",u.value=0,n.value="Ingreso"};return($,r)=>(_(),g(A,null,[e("button",{onClick:r[0]||(r[0]=l=>s.value=!0)},"Agregar Movimiento"),(_(),B(P,{to:"#app"},[w(M(De,{onClose:r[6]||(r[6]=l=>s.value=!1)},{default:S(()=>[e("form",{onSubmit:O(y,["prevent"])},[e("div",He,[Ne,w(e("input",{type:"text","onUpdate:modelValue":r[1]||(r[1]=l=>i.value=l)},null,512),[[N,i.value]])]),e("div",Ve,[Ae,w(e("input",{type:"number","onUpdate:modelValue":r[2]||(r[2]=l=>u.value=l)},null,512),[[N,u.value]])]),e("div",Be,[Te,w(e("textarea",{rows:"4","onUpdate:modelValue":r[3]||(r[3]=l=>d.value=l)},null,512),[[N,d.value]])]),e("div",Re,[e("label",Fe,[w(e("input",{type:"radio","onUpdate:modelValue":r[4]||(r[4]=l=>n.value=l),value:"Ingreso"},null,512),[[T,n.value]]),Ee]),e("label",Ue,[w(e("input",{type:"radio","onUpdate:modelValue":r[5]||(r[5]=l=>n.value=l),value:"Gasto"},null,512),[[T,n.value]]),Ge])]),Xe],32)]),_:1},512),[[V,s.value]])]))],64))}},Je=b(ze,[["__scopeId","data-v-a6916438"]]),Oe=t=>(L("data-v-7727561b"),t=t(),k(),t),Pe=["y1","y2"],je=["points"],qe=["x1","x2"],We=Oe(()=>e("p",null,"Últimos 30 días",-1)),Ze={__name:"Graphic",props:{amounts:{type:Array,default:()=>[]}},emits:["select"],setup(t,{emit:o}){const s=t,i=l=>{const p=Math.min(...s.amounts),a=Math.max(...s.amounts),c=l+Math.abs(p),m=Math.abs(a)+Math.abs(p);return 200-c*100/m*2},u=f(()=>i(0)),d=f(()=>{const l=s.amounts.length;return s.amounts.reduce((p,a,c)=>{const m=300/l*(c+1),H=i(a);return`${p} ${m},${H}`},`0, ${i(s.amounts.length?s.amounts[0]:0)}`)}),n=h(!1),v=h(0),y=o;j(v,l=>{const p=s.amounts.length,a=Math.ceil(l*p/300)-1;a<0||a>=p||y("select",s.amounts[a],a)});const $=({target:l,touches:p})=>{n.value=!0;const a=l.getBoundingClientRect().width,c=l.getBoundingClientRect().x,m=p[0].clientX;v.value=(m-c)*300/a},r=()=>{n.value=!1};return(l,p)=>(_(),g("div",null,[(_(),g("svg",{onTouchstart:$,onTouchmove:$,onTouchend:r,viewBox:"0 0 300 200"},[e("line",{stroke:"#c4c4c4","stroke-width":"2",x1:"0",y1:u.value,x2:"300",y2:u.value},null,8,Pe),e("polyline",{fill:"none",stroke:"#0689B0","stroke-width":"2",points:d.value},null,8,je),w(e("line",{stroke:"#04b500","stroke-width":"2",x1:v.value,y1:"0",x2:v.value,y2:"200"},null,8,qe),[[V,n.value]])],32)),We]))}},Ke=b(Ze,[["__scopeId","data-v-7727561b"]]),Ye={__name:"Home",setup(t){let o=h(null),s=null,u=new Date().toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}),d=h(u),n=h([]);const v=f(()=>{const a=n.value.filter(c=>{const m=new Date,H=m.setDate(m.getDate()-30);return c.time>H}).map(c=>c.amount);return a.map((c,m)=>a.slice(0,m+1).reduce((F,E)=>F+E,0))}),y=f(()=>n.value.reduce((a,c)=>a+c.amount,0));q(()=>{const a=JSON.parse(localStorage.getItem("movements"));Array.isArray(a)&&(n.value=a.map(c=>({...c,time:new Date(c.time)})))});function $(a){n.value.push(a),l()}function r(a){const c=n.value.findIndex(m=>m.id===a);n.value.splice(c,1),l()}function l(){localStorage.setItem("movements",JSON.stringify(n.value))}const p=(a,c)=>{o.value=a;const m=n.value[c].time.toLocaleString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"});d.value=m,console.log(o.value,d.value)};return(a,c)=>(_(),B(ie,null,{header:S(()=>[M(Q)]),resume:S(()=>[M(de,{label:x(s),"total-amount":y.value,amount:x(o),date:x(d)},{graphic:S(()=>[M(Ke,{amounts:v.value,onSelect:p},null,8,["amounts"])]),action:S(()=>[M(Je,{onCreate:$})]),_:1},8,["label","total-amount","amount","date"])]),movements:S(()=>[M(xe,{movements:x(n),onRemove:r},null,8,["movements"])]),_:1}))}};export{Ye as default};
